# Руководство по использованию Agent Commander

## 1. Запуск
1. Установите Python 3.10+ (один раз).
2. Запустите `run_agent_commander.bat` (двойной клик).
3. При первом запуске лаунчер автоматически:
- создаст локальное окружение `.venv`,
- установит зависимости из `requirements.txt`,
- запустит приложение.
4. Со следующих запусков приложение стартует сразу (переустановка зависимостей только если изменился `requirements.txt`).

```bash
run_agent_commander.bat
```

## 2. Структура интерфейса
- `Main Menu`:
  - `+ Add Pane` - добавить новое окно агента.
  - `Main Cache` - открыть папку `main_cache`.
- `Task Board`:
  - `New Task` - создать задачу.
  - `Refresh` - обновить список задач.
  - `Attach Focused` - привязать выбранную задачу к активному окну.
  - `Clear Focused` - снять привязку задачи с активного окна.
  - Dropdown задач - выбор активной задачи для привязки.
- Панели агентов:
  - выбор папки,
  - выбор агента,
  - slash-меню,
  - поле ввода промпта,
  - кнопка закрытия окна.

## 3. Работа с задачами (Task Board)
1. Нажмите `New Task`.
2. Заполните:
- `Title` (обязательно),
- `Folder` (опционально),
- `Status`,
- `Priority`,
- `Goal`.
3. Нажмите `Create`.
4. Выберите задачу в dropdown.
5. Сфокусируйте нужное окно агента и нажмите `Attach Focused`.

## 4. Как читать статус
В нижней строке отображается:
- `Panes` - количество окон,
- `Focus` - активное окно,
- `FocusTask` - задача, привязанная к активному окну,
- `Source` - окно-источник для инъекции контекста,
- служебные подсказки по горячим клавишам,
- текущая заметка действия.

## 5. Горячие клавиши
- `Ctrl+N` - добавить окно.
- `Ctrl+Shift+W` - закрыть активное окно.
- `Tab` / `Shift+Tab` - переключить фокус между окнами.
- `F1/F2/F3` - выбрать source-окно.
- `Shift+F1/F2/F3` - инжектировать контекст source -> target.
- `Ctrl+Q` - закрыть приложение.

## 6. Где хранятся данные
- Основная папка кэша: `main_cache`.
- База оркестратора: `main_cache/orchestrator.db`.
- Привязки задач к окнам сохраняются между перезапусками.

## 7. Текущие ограничения
- Пока реализован MVP `Phase 1`: базовые задачи и ручная привязка к окнам.
- Авто-handoff, детекция лимитов и авто-лупы еще не реализованы.

## 8. Рекомендованный рабочий цикл
1. Создайте задачу в `Task Board`.
2. Привяжите задачу к активному окну агента.
3. Работайте в окне, периодически обновляйте статус задачи.
4. Для переключения на другой агент создайте новое окно и привяжите ту же задачу.
5. Используйте `main_cache` как общее место для артефактов и промежуточных файлов.
